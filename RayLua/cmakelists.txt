cmake_minimum_required(VERSION 3.16)
project(raylib_lua_imgui C)

set(CMAKE_C_STANDARD 11)

include(FetchContent)

# Fetch raylib
FetchContent_Declare(raylib
        URL https://github.com/raysan5/raylib/archive/refs/tags/5.0.tar.gz
)
FetchContent_MakeAvailable(raylib)

# Fetch rlImGui
FetchContent_Declare(rlimgui
        URL https://github.com/raylib-extras/rlImGui/archive/refs/heads/main.zip
)
FetchContent_MakeAvailable(rlimgui)

# Reference precompiled LuaJIT
set(LUAJIT_ROOT "c:/Eugene/Games/build2-git/RayLua/External/LuaJIT/src")
find_library(LUAJIT_LIBRARY
        NAMES lua51 luajit
        PATHS ${LUAJIT_ROOT}
        NO_DEFAULT_PATH
)

add_executable(game main.c)

target_include_directories(game PRIVATE
        ${rlimgui_SOURCE_DIR}
        ${raylib_SOURCE_DIR}/src
        ${LUAJIT_ROOT}
)

target_link_libraries(game raylib rlimgui ${LUAJIT_LIBRARY})

configure_file(script.lua ${CMAKE_CURRENT_BINARY_DIR}/script.lua COPYONLY)
